{
  "name": "Telegram Prompt to Runway Video",
  "nodes": [
    {
      "id": "telegram_trigger",
      "name": "Telegram Trigger",
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1,
      "position": [
        200,
        200
      ],
      "parameters": {
        "updateTypes": [
          "message"
        ]
      },
      "credentials": {
        "telegramApi": {
          "id": "__YOUR_TELEGRAM_CREDENTIAL_ID__",
          "name": "Telegram Account"
        }
      }
    },
    {
      "id": "extract_prompt",
      "name": "Extract Prompt",
      "type": "n8n-nodes-base.set",
      "typeVersion": 1,
      "position": [
        400,
        200
      ],
      "parameters": {
        "fields": [
          {
            "name": "prompt",
            "value": "={{$json[\"message\"][\"text\"]}}"
          },
          {
            "name": "chat_id",
            "value": "={{$json[\"message\"][\"chat\"][\"id\"]}}"
          }
        ]
      }
    },
    {
      "id": "runway_generate",
      "name": "Runway Generate",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        600,
        200
      ],
      "parameters": {
        "authentication": "none",
        "url": "https://api.runwayml.com/v1/generate/video",
        "method": "POST",
        "responseFormat": "json",
        "jsonParameters": true,
        "options": {},
        "bodyParametersJson": "={\n  \"prompt\": \"{{$json[\"prompt\"]}}\",\n  \"resolution\": \"720p\",\n  \"length\": 4\n}"
      },
      "headers": {
        "Authorization": "Bearer key_f99cd0c0b70a48c17abd111e919018be9b1ddbf8589b5a743387063345bf12074d9738c0ab62e4a67b361aa6b6af2fcdfbb5d10842d7c8b36158e2cef50c4e0b",
        "Content-Type": "application/json"
      }
    },
    {
      "id": "wait_for_video",
      "name": "Wait 40s",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1,
      "position": [
        800,
        200
      ],
      "parameters": {
        "waitFor": "time",
        "time": {
          "unit": "seconds",
          "value": 40
        }
      }
    },
    {
      "id": "get_video_url",
      "name": "Get Video URL",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        1000,
        200
      ],
      "parameters": {
        "authentication": "none",
        "url": "https://api.runwayml.com/v1/jobs/{{$json[\"id\"]}}",
        "method": "GET",
        "responseFormat": "json"
      },
      "headers": {
        "Authorization": "Bearer key_f99cd0c0b70a48c17abd111e919018be9b1ddbf8589b5a743387063345bf12074d9738c0ab62e4a67b361aa6b6af2fcdfbb5d10842d7c8b36158e2cef50c4e0b"
      }
    },
    {
      "id": "send_video",
      "name": "Send Video to Telegram",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        1200,
        200
      ],
      "parameters": {
        "operation": "sendVideo",
        "chatId": "={{$json[\"chat_id\"]}}",
        "video": "={{$json[\"video_url\"]}}"
      },
      "credentials": {
        "telegramApi": {
          "id": "__YOUR_TELEGRAM_CREDENTIAL_ID__",
          "name": "Telegram Account"
        }
      }
    }
  ],
  "connections": {
    "telegram_trigger": {
      "main": [
        [
          {
            "node": "extract_prompt",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "extract_prompt": {
      "main": [
        [
          {
            "node": "runway_generate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "runway_generate": {
      "main": [
        [
          {
            "node": "wait_for_video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "wait_for_video": {
      "main": [
        [
          {
            "node": "get_video_url",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get_video_url": {
      "main": [
        [
          {
            "node": "send_video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {},
  "versionId": "1"
}